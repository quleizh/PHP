# PHP 开发规范



> Note：个人记录，仅作为参考



其他

- [PSR](https://www.php-fig.org/psr/)
- [PHP: The Right Way](https://phptherightway.com/)



## 目录

[编码规范](#编码规范)

- [命名规则](#命名规则)
- [其他](#其他)



## 编码规范

### 命名规则

1.1 名副其实

在为任何一个变量、函数、类命名前，首先要明确地想清楚它是做什么的，人后再为它取一个直达其意的名字。如果在看到一个命名的五秒钟内，你还是想不起来它是做什么的话，那么这个命名就是糟糕的；如果还需要查手册才能明白它的含义时，这个命名的糟糕程度与`#¥#*&（@#¥`无异。

```
// bad
$u = xxx

// good
$userName = xxx
```



1.2 变量名

1) 统一使用驼峰式，首字母小写，例如：`$fileName`

2) 如果是类的保护或私有变量，应在变量标记`$`后以（ _ ）下划线开头，例如：`$_fileName`
3) 全局常量或静态变量，一般使用全大写，（ _ ）下划线分割的命名方式，例如：`$FILE_NAME`



1.3 方法和函数名



**[⬆ 回到顶部](#目录)**



### 格式化



### 字符串引用



### 忠告



### 注释

文件注释

```
/**
* github - Controller - 用护消息控制类
* ==================================
* Copyright 2023-2023 github.com
* ==================================
*
* @file
* @since 2023-01-01
* @author lisi
* @version $id: $
*
*/
```



``` 
/**
* 获取用户的消息列表
* @param int $uid 用户id
* @return array $arrayName 用户名称列表
* @since 2023-01-01
* @author lisi
* @lastupdate 2023-01-01 lisi
*/
```





### 其他

6.1 PHP文件

1. 统一使用 <?php 开头，前面不应有任何多余字符，且不要使用 <? 这种简易方式（这种方式在PHP配置中已经禁用），否则可能和某些其他语言的文件混淆（如：xml）

2. 文件结尾不要使用 ?> ，以避免文件末尾带有其他字符造成的文件解析或代码无法执行等问题



6.2 异常处理

1. try/catch使用在可能抛出异常的代码段外层，原则上不同类型的多个异常应该分别使用try/catch捕获，同类型的多个异常可以使用同一组try/catch捕获，尽量避免多层的try/catch嵌套，很难追查定位问题
2. 对于可能抛出异常的系统调、数据库操作、缓存操作等必须有try/catch错失，以免给用户保留系统错误信息
3. 捕获异常的类型统一使用CException



## 设计风格

### 类



### 函数或方法



### 系统调用



### 不要采用缺省方法测试非零值



### 布尔逻辑类型



### 避免嵌入式的复制



### 面向对象



## 代码规范



## 数据库设计

### 存储引擎

### 表设计

### 字段类型



### SQL编写



### 查询方式



### 表规模



## 开发测试流程

### 开发



### 测试



### 上线



## 文档

### 文档命名

文档名称示例：《PHP 开发规范_20230101V1r2-­‐draft_lisi_comments》

注解：

1. 20230101：创建大版本号的日期
2. V1r2：V为version，表示大版本号，从1开始；r为revision，表示小版本号，从1开始增加，每次文档发给别人时，该数字+1
3. -draft：表明为草案，在正式发给别人时，这个去掉即可
4. _lisi_comments：任何的说明，可以表示谁谁做了什么，空格用（ _ ）代替



**[⬆ 回到顶部](#目录)**



